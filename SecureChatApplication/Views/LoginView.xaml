<UserControl x:Class="SecureChatApplication.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="400"
             Background="#1E1E2E">
    
    <UserControl.Resources>
        <!-- Modern Dark Theme Styles -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#2D2D3D"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#3D3D5C"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="#FFFFFF"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                          Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#7C3AED"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#5B5B8C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#7C3AED"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#8B5CF6"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#6D28D9"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#4B4B6B"/>
                                <Setter Property="Foreground" Value="#8B8BA3"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Border Background="#252536" CornerRadius="16" Margin="40"
                VerticalAlignment="Center" HorizontalAlignment="Center"
                MinWidth="320" Padding="32">
            <Border.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="30" ShadowDepth="0" Opacity="0.3"/>
            </Border.Effect>
            
            <StackPanel>
                <!-- Logo/Title -->
                <StackPanel Margin="0,0,0,32" HorizontalAlignment="Center">
                    <TextBlock Text="&#x1F512;" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock Text="Secure Chat" 
                               FontSize="28" FontWeight="Bold" 
                               Foreground="#FFFFFF"
                               HorizontalAlignment="Center"
                               Margin="0,8,0,0"/>
                    <TextBlock Text="End-to-End Encrypted" 
                               FontSize="12" 
                               Foreground="#8B8BA3"
                               HorizontalAlignment="Center"
                               Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Username Input -->
                <TextBlock Text="Username" 
                           Foreground="#B8B8D1" 
                           FontSize="12" 
                           Margin="0,0,0,6"/>
                <TextBox Style="{StaticResource ModernTextBox}"
                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                         MaxLength="20"/>
                
                <!-- Server URL Input -->
                <TextBlock Text="Server URL" 
                           Foreground="#B8B8D1" 
                           FontSize="12" 
                           Margin="0,16,0,6"/>
                <TextBox Style="{StaticResource ModernTextBox}"
                         Text="{Binding ServerUrl, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- Connect Button -->
                <Button Style="{StaticResource ModernButton}"
                        Content="Connect"
                        Command="{Binding ConnectCommand}"
                        Margin="0,24,0,0"/>
                
                <!-- Loading Indicator -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center"
                            Margin="0,16,0,0"
                            Visibility="{Binding IsConnecting, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="*" Foreground="#7C3AED" FontSize="8" Margin="0,0,4,0">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsConnecting}" Value="True">
                                        <DataTrigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard RepeatBehavior="Forever">
                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                                     From="0.3" To="1" Duration="0:0:0.5"
                                                                     AutoReverse="True"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.EnterActions>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                    <TextBlock Text="Connecting..." 
                               Foreground="#8B8BA3" 
                               FontSize="12"/>
                </StackPanel>
                
                <!-- Status Message -->
                <TextBlock Text="{Binding StatusMessage}"
                           Foreground="#F87171"
                           FontSize="12"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           Margin="0,12,0,0"
                           Visibility="{Binding StatusMessage, Converter={StaticResource StringToVisibilityConverter}}"/>
                
                <!-- Security Info -->
                <Border Background="#1E1E2E" CornerRadius="8" Padding="12" Margin="0,24,0,0">
                    <StackPanel>
                        <TextBlock Text="&#x1F510; Security Features" 
                                   Foreground="#B8B8D1" 
                                   FontSize="11" 
                                   FontWeight="SemiBold"/>
                        <TextBlock Text="- ECDH Key Exchange (P-256)" 
                                   Foreground="#6B6B8A" 
                                   FontSize="10" 
                                   Margin="0,4,0,0"/>
                        <TextBlock Text="- AES-256-GCM Encryption" 
                                   Foreground="#6B6B8A" 
                                   FontSize="10"/>
                        <TextBlock Text="- Server Never Sees Plaintext" 
                                   Foreground="#6B6B8A" 
                                   FontSize="10"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
